<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="using:WinUI.TableView"
                    xmlns:primitives="using:WinUI.TableView.Primitives"
                    xmlns:animatedvisuals="using:Microsoft.UI.Xaml.Controls.AnimatedVisuals"
                    xmlns:win="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                    xmlns:not_win="http://uno.ui/not_win"
                    mc:Ignorable="not_win">

    <ResourceDictionary.MergedDictionaries>
        <ResourceDictionary Source="ms-appx:///WinUI.TableView/Themes/Resources.xaml" />
    </ResourceDictionary.MergedDictionaries>

    <Style x:Key="DefaultTableViewRowStyle"
           TargetType="local:TableViewRow"
           win:BasedOn="{StaticResource DefaultListViewItemStyle}"
           not_win:BasedOn="{StaticResource ListViewItemExpanded}">
        <Setter Property="FontFamily" Value="{ThemeResource ContentControlThemeFontFamily}" />
        <Setter Property="FontSize" Value="{ThemeResource ControlContentThemeFontSize}" />
        <Setter Property="Background" Value="{ThemeResource TableViewRowBackground}" />
        <Setter Property="Foreground" Value="{ThemeResource TableViewRowForeground}" />
        <Setter Property="TabNavigation" Value="Local" />
        <win:Setter Property="IsHoldingEnabled" Value="True" />
        <Setter Property="Padding" Value="0" />
        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
        <Setter Property="VerticalContentAlignment" Value="Stretch" />
        <Setter Property="MinWidth" Value="{ThemeResource TableViewRowMinWidth}" />
        <Setter Property="MinHeight" Value="0" />
        <Setter Property="AllowDrop" Value="False" />
        <Setter Property="UseSystemFocusVisuals" Value="True" />
        <Setter Property="FocusVisualMargin" Value="1" />
        <Setter Property="FocusVisualPrimaryBrush" Value="{ThemeResource TableViewRowFocusVisualPrimaryBrush}" />
        <Setter Property="FocusVisualPrimaryThickness" Value="2" />
        <Setter Property="FocusVisualSecondaryBrush" Value="{ThemeResource TableViewRowFocusVisualSecondaryBrush}" />
        <Setter Property="FocusVisualSecondaryThickness" Value="1" />
        <win:Setter Property="Template">
            <win:Setter.Value>
                <ControlTemplate TargetType="ListViewItem">
                    <primitives:ListViewItemPresenter x:Name="Root"
                                                      ContentTransitions="{TemplateBinding ContentTransitions}"
                                                      Control.IsTemplateFocusTarget="True"
                                                      FocusVisualMargin="{TemplateBinding FocusVisualMargin}"
                                                      FocusVisualPrimaryBrush="{TemplateBinding FocusVisualPrimaryBrush}"
                                                      FocusVisualPrimaryThickness="{TemplateBinding FocusVisualPrimaryThickness}"
                                                      FocusVisualSecondaryBrush="{TemplateBinding FocusVisualSecondaryBrush}"
                                                      FocusVisualSecondaryThickness="{TemplateBinding FocusVisualSecondaryThickness}"
                                                      SelectionCheckMarkVisualEnabled="{ThemeResource TableViewRowSelectionCheckMarkVisualEnabled}"
                                                      CheckBrush="{ThemeResource TableViewRowCheckBrush}"
                                                      CheckBoxBrush="{ThemeResource TableViewRowCheckBoxBrush}"
                                                      DragBackground="{ThemeResource TableViewRowDragBackground}"
                                                      DragForeground="{ThemeResource TableViewRowDragForeground}"
                                                      FocusBorderBrush="{ThemeResource TableViewRowFocusBorderBrush}"
                                                      FocusSecondaryBorderBrush="{ThemeResource TableViewRowFocusSecondaryBorderBrush}"
                                                      PlaceholderBackground="{ThemeResource TableViewRowPlaceholderBackground}"
                                                      PointerOverBackground="{ThemeResource TableViewRowBackgroundPointerOver}"
                                                      PointerOverForeground="{ThemeResource TableViewRowForegroundPointerOver}"
                                                      SelectedBackground="{ThemeResource TableViewRowBackgroundSelected}"
                                                      SelectedForeground="{ThemeResource TableViewRowForegroundSelected}"
                                                      SelectedPointerOverBackground="{ThemeResource TableViewRowBackgroundSelectedPointerOver}"
                                                      PressedBackground="{ThemeResource TableViewRowBackgroundPressed}"
                                                      SelectedPressedBackground="{ThemeResource TableViewRowBackgroundSelectedPressed}"
                                                      DisabledOpacity="{ThemeResource TableViewRowDisabledThemeOpacity}"
                                                      DragOpacity="{ThemeResource TableViewRowDragThemeOpacity}"
                                                      ReorderHintOffset="{ThemeResource TableViewRowReorderHintThemeOffset}"
                                                      HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                      VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                                                      ContentMargin="{TemplateBinding Padding}"
                                                      CheckMode="{ThemeResource TableViewRowCheckMode}"
                                                      CornerRadius="{ThemeResource TableViewRowCornerRadius}"
                                                      CheckPressedBrush="{ThemeResource TableViewRowCheckPressedBrush}"
                                                      CheckDisabledBrush="{ThemeResource TableViewRowCheckDisabledBrush}"
                                                      CheckBoxPointerOverBrush="{ThemeResource TableViewRowCheckBoxPointerOverBrush}"
                                                      CheckBoxPressedBrush="{ThemeResource TableViewRowCheckBoxPressedBrush}"
                                                      CheckBoxDisabledBrush="{ThemeResource TableViewRowCheckBoxDisabledBrush}"
                                                      CheckBoxSelectedBrush="{ThemeResource TableViewRowCheckBoxSelectedBrush}"
                                                      CheckBoxSelectedPointerOverBrush="{ThemeResource TableViewRowCheckBoxSelectedPointerOverBrush}"
                                                      CheckBoxSelectedPressedBrush="{ThemeResource TableViewRowCheckBoxSelectedPressedBrush}"
                                                      CheckBoxSelectedDisabledBrush="{ThemeResource TableViewRowCheckBoxSelectedDisabledBrush}"
                                                      CheckBoxBorderBrush="{ThemeResource TableViewRowCheckBoxBorderBrush}"
                                                      CheckBoxPointerOverBorderBrush="{ThemeResource TableViewRowCheckBoxPointerOverBorderBrush}"
                                                      CheckBoxPressedBorderBrush="{ThemeResource TableViewRowCheckBoxPressedBorderBrush}"
                                                      CheckBoxDisabledBorderBrush="{ThemeResource TableViewRowCheckBoxDisabledBorderBrush}"
                                                      CheckBoxCornerRadius="{ThemeResource TableViewRowCheckBoxCornerRadius}"
                                                      SelectionIndicatorCornerRadius="{ThemeResource TableViewRowSelectionIndicatorCornerRadius}"
                                                      SelectionIndicatorVisualEnabled="{ThemeResource TableViewRowSelectionIndicatorVisualEnabled}"
                                                      SelectionIndicatorBrush="{ThemeResource TableViewRowSelectionIndicatorBrush}"
                                                      SelectionIndicatorPointerOverBrush="{ThemeResource TableViewRowSelectionIndicatorPointerOverBrush}"
                                                      SelectionIndicatorPressedBrush="{ThemeResource TableViewRowSelectionIndicatorPressedBrush}"
                                                      SelectionIndicatorDisabledBrush="{ThemeResource TableViewRowSelectionIndicatorDisabledBrush}"
                                                      SelectedDisabledBackground="{ThemeResource TableViewRowBackgroundSelectedDisabled}" />

                </ControlTemplate>
            </win:Setter.Value>
        </win:Setter>
        <not_win:Setter Property="Template">
            <not_win:Setter.Value>
                <ControlTemplate TargetType="local:TableViewRow">
                    <Grid x:Name="ContentBorder"
                          Control.IsTemplateFocusTarget="True"
                          FocusVisualMargin="{TemplateBinding FocusVisualMargin}"
                          Background="{ThemeResource SubtleFillColorTransparentBrush}"
                          BorderBrush="{TemplateBinding BorderBrush}"
                          BorderThickness="{TemplateBinding BorderThickness}"
                          CornerRadius="{TemplateBinding CornerRadius}"
                          RenderTransformOrigin="0.5,0.5"
                          DataContext="{TemplateBinding Content}">

                        <Grid.RenderTransform>
                            <ScaleTransform x:Name="ContentBorderScale" />
                        </Grid.RenderTransform>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal" />

                                <VisualState x:Name="PointerOver">
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="SelectionBackground"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="1" />
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectionBackground"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowBackgroundPointerOver}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">

                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="SelectionBackground"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="1" />
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectionBackground"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowBackgroundPressed}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                       Storyboard.TargetProperty="BorderBrush">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowCheckBoxBorderBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Selected">
                                    <VisualState.Setters>
                                        <Setter Target="MultiSelectCheck.(AnimatedIcon.State)"
                                                Value="NormalOn" />
                                    </VisualState.Setters>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="MultiSelectCheck"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0:0:0"
                                                         To="1" />
                                        <DoubleAnimation Storyboard.TargetName="SelectionBackground"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="1" />
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectionBackground"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowBackgroundSelected}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                       Storyboard.TargetProperty="BorderBrush">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowCheckBoxSelectedBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowCheckBoxSelectedBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheck"
                                                                       Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowCheckBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="SelectionIndicatorScale"
                                                                       Storyboard.TargetProperty="ScaleY">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.35"
                                                                  KeySpline="0.1,0.9 0.2,1.0"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="PointerOverSelected">
                                    <VisualState.Setters>
                                        <Setter Target="MultiSelectCheck.(AnimatedIcon.State)"
                                                Value="NormalOn" />
                                    </VisualState.Setters>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="MultiSelectCheck"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0:0:0"
                                                         To="1" />
                                        <DoubleAnimation Storyboard.TargetName="SelectionBackground"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="1" />
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectionBackground"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowBackgroundSelectedPointerOver}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                       Storyboard.TargetProperty="BorderBrush">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowCheckBoxSelectedPointerOverBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowCheckBoxSelectedPointerOverBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheck"
                                                                       Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowCheckBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="SelectionIndicatorScale"
                                                                       Storyboard.TargetProperty="ScaleY">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.35"
                                                                  KeySpline="0.1,0.9 0.2,1.0"
                                                                  Value="1" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="PressedSelected">
                                    <VisualState.Setters>
                                        <Setter Target="MultiSelectCheck.(AnimatedIcon.State)"
                                                Value="NormalOn" />
                                    </VisualState.Setters>
                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="MultiSelectCheck"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0:0:0"
                                                         To="1" />
                                        <DoubleAnimation Storyboard.TargetName="SelectionBackground"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="1" />
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectionBackground"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowBackgroundSelectedPressed}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                       Storyboard.TargetProperty="BorderBrush">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowCheckBoxSelectedPressedBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                       Storyboard.TargetProperty="Background">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowCheckBoxSelectedPressedBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheck"
                                                                       Storyboard.TargetProperty="Foreground">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="{ThemeResource TableViewRowCheckBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="SelectionIndicatorScale"
                                                                       Storyboard.TargetProperty="ScaleY">
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.1"
                                                                  KeySpline="0.1,0.9 0.2,1.0"
                                                                  Value="0.5" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                            </VisualStateGroup>

                            <VisualStateGroup x:Name="DisabledStates">
                                <VisualState x:Name="Enabled" />

                                <VisualState x:Name="Disabled">

                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="{ThemeResource TableViewRowDisabledThemeOpacity}" />
                                    </Storyboard>
                                </VisualState>

                            </VisualStateGroup>

                            <VisualStateGroup x:Name="MultiSelectStates">
                                <VisualState x:Name="MultiSelectDisabled">
                                    <VisualState.Setters>
                                        <Setter Target="HeaderGrid.MinWidth"
                                                Value="16" />
                                    </VisualState.Setters>

                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheckBoxTransform"
                                                                       Storyboard.TargetProperty="X">
                                            <EasingDoubleKeyFrame KeyTime="0:0:0"
                                                                  Value="0" />
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.333"
                                                                  Value="-32"
                                                                  KeySpline="0.1,0.9,0.2,1" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectClipTransform"
                                                                       Storyboard.TargetProperty="X">
                                            <EasingDoubleKeyFrame KeyTime="0:0:0"
                                                                  Value="0" />
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.333"
                                                                  Value="32"
                                                                  KeySpline="0.1,0.9,0.2,1" />
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="MultiSelectEnabled">
                                    <VisualState.Setters>
                                        <Setter Target="HeaderGrid.MinWidth"
                                                Value="36" />
                                    </VisualState.Setters>

                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheckBoxTransform"
                                                                       Storyboard.TargetProperty="X">
                                            <EasingDoubleKeyFrame KeyTime="0:0:0"
                                                                  Value="-32" />
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.333"
                                                                  Value="0"
                                                                  KeySpline="0.1,0.9,0.2,1" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectClipTransform"
                                                                       Storyboard.TargetProperty="X">
                                            <EasingDoubleKeyFrame KeyTime="0:0:0"
                                                                  Value="32" />
                                            <SplineDoubleKeyFrame KeyTime="0:0:0.333"
                                                                  Value="0"
                                                                  KeySpline="0.1,0.9,0.2,1" />
                                        </DoubleAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectSquare"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="MultiSelectCheck"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="SelectionIndicator"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Collapsed" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                            </VisualStateGroup>

                            <VisualStateGroup x:Name="DataVirtualizationStates">
                                <VisualState x:Name="DataAvailable" />

                                <VisualState x:Name="DataPlaceholder">

                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="PlaceholderTextBlock"
                                                                       Storyboard.TargetProperty="Visibility">
                                            <DiscreteObjectKeyFrame KeyTime="0"
                                                                    Value="Visible" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                            </VisualStateGroup>

                            <VisualStateGroup x:Name="ReorderHintStates">
                                <VisualState x:Name="NoReorderHint" />

                                <VisualState x:Name="BottomReorderHint">

                                    <Storyboard>
                                        <DragOverThemeAnimation TargetName="ContentBorder"
                                                                ToOffset="{ThemeResource TableViewRowReorderHintThemeOffset}"
                                                                Direction="Bottom" />
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="TopReorderHint">

                                    <Storyboard>
                                        <DragOverThemeAnimation TargetName="ContentBorder"
                                                                ToOffset="{ThemeResource TableViewRowReorderHintThemeOffset}"
                                                                Direction="Top" />
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="RightReorderHint">

                                    <Storyboard>
                                        <DragOverThemeAnimation TargetName="ContentBorder"
                                                                ToOffset="{ThemeResource TableViewRowReorderHintThemeOffset}"
                                                                Direction="Right" />
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="LeftReorderHint">

                                    <Storyboard>
                                        <DragOverThemeAnimation TargetName="ContentBorder"
                                                                ToOffset="{ThemeResource TableViewRowReorderHintThemeOffset}"
                                                                Direction="Left" />
                                    </Storyboard>
                                </VisualState>

                                <VisualStateGroup.Transitions>
                                    <VisualTransition To="NoReorderHint"
                                                      GeneratedDuration="0:0:0.2" />
                                </VisualStateGroup.Transitions>

                            </VisualStateGroup>

                            <VisualStateGroup x:Name="DragStates">
                                <VisualState x:Name="NotDragging" />

                                <VisualState x:Name="Dragging">

                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="{ThemeResource TableViewRowDragThemeOpacity}" />
                                        <DragItemThemeAnimation TargetName="ContentBorder" />
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="DraggingTarget" />

                                <VisualState x:Name="MultipleDraggingPrimary">

                                    <Storyboard>
                                        <!-- These two Opacity animations are required - the FadeInThemeAnimations
                                             on the same elements animate an internal Opacity. -->
                                        <DoubleAnimation Storyboard.TargetName="MultiArrangeOverlayText"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="1" />
                                        <DoubleAnimation Storyboard.TargetName="MultiArrangeOverlayTextBorder"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="1" />
                                        <DoubleAnimation Storyboard.TargetName="MultiSelectSquare"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="0" />
                                        <DoubleAnimation Storyboard.TargetName="MultiSelectCheck"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="0" />
                                        <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="{ThemeResource TableViewRowDragThemeOpacity}" />
                                        <FadeInThemeAnimation TargetName="MultiArrangeOverlayText" />
                                        <FadeInThemeAnimation TargetName="MultiArrangeOverlayTextBorder" />
                                        <DragItemThemeAnimation TargetName="ContentBorder" />
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="MultipleDraggingSecondary" />

                                <VisualState x:Name="DraggedPlaceholder" />

                                <VisualState x:Name="Reordering">

                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0:0:0.240"
                                                         To="{ThemeResource ListViewItemReorderThemeOpacity}" />
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="ReorderingTarget">

                                    <Storyboard>
                                        <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0:0:0.240"
                                                         To="{ThemeResource ListViewItemReorderTargetThemeOpacity}" />
                                        <DoubleAnimation Storyboard.TargetName="ContentBorderScale"
                                                         Storyboard.TargetProperty="ScaleX"
                                                         Duration="0:0:0.240"
                                                         To="{ThemeResource ListViewItemReorderTargetThemeScale}" />
                                        <DoubleAnimation Storyboard.TargetName="ContentBorderScale"
                                                         Storyboard.TargetProperty="ScaleY"
                                                         Duration="0:0:0.240"
                                                         To="{ThemeResource ListViewItemReorderTargetThemeScale}" />
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="MultipleReorderingPrimary">

                                    <Storyboard>
                                        <!-- These two Opacity animations are required - the FadeInThemeAnimations
                                             on the same elements animate an internal Opacity. -->
                                        <DoubleAnimation Storyboard.TargetName="MultiArrangeOverlayText"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="1" />
                                        <DoubleAnimation Storyboard.TargetName="MultiArrangeOverlayTextBorder"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="1" />
                                        <DoubleAnimation Storyboard.TargetName="MultiSelectSquare"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="0" />
                                        <DoubleAnimation Storyboard.TargetName="MultiSelectCheck"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0"
                                                         To="0" />
                                        <DoubleAnimation Storyboard.TargetName="ContentBorder"
                                                         Storyboard.TargetProperty="Opacity"
                                                         Duration="0:0:0.240"
                                                         To="{ThemeResource TableViewRowDragThemeOpacity}" />
                                        <FadeInThemeAnimation TargetName="MultiArrangeOverlayText" />
                                        <FadeInThemeAnimation TargetName="MultiArrangeOverlayTextBorder" />
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="ReorderedPlaceholder">

                                    <Storyboard>
                                        <FadeOutThemeAnimation TargetName="ContentBorder" />
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="DragOver">

                                    <Storyboard>
                                        <DropTargetItemThemeAnimation TargetName="ContentBorder" />
                                    </Storyboard>
                                </VisualState>

                                <VisualStateGroup.Transitions>
                                    <VisualTransition To="NotDragging"
                                                      GeneratedDuration="0:0:0.2" />
                                </VisualStateGroup.Transitions>

                            </VisualStateGroup>

                        </VisualStateManager.VisualStateGroups>

                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <Border x:Name="BackgroundBorder"
                                Grid.ColumnSpan="3"
                                CornerRadius="{ThemeResource TableViewRowCornerRadius}"
                                Background="{TemplateBinding Background}" />

                        <Border x:Name="SelectionBackground"
                                Grid.ColumnSpan="3"
                                IsHitTestVisible="False"
                                Background="{ThemeResource ListViewItemBorderBackground}"
                                Opacity="0"
                                Margin="2"
                                CornerRadius="{ThemeResource TableViewRowCornerRadius}"
                                Control.IsTemplateFocusTarget="True" />

                        <Grid x:Name="HeaderGrid"
                              VerticalAlignment="Top"
                              Height="{Binding TableView.RowHeight, RelativeSource={RelativeSource TemplatedParent}}"
                              MinHeight="{Binding TableView.RowMinHeight, RelativeSource={RelativeSource TemplatedParent}}"
                              MaxHeight="{Binding TableView.RowMaxHeight, RelativeSource={RelativeSource TemplatedParent}}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition x:Name="SelectionIndicatorColumn"
                                                  Width="Auto" />
                                <ColumnDefinition x:Name="MultiSelectSquareColumn"
                                                  Width="Auto" />
                            </Grid.ColumnDefinitions>

                            <Border x:Name="SelectionIndicator"
                                       Margin="2,0,0,0"
                                       Width="3"
                                       Height="16"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Left"
                                       RenderTransformOrigin="0.5,0.5"
                                       Background="{ThemeResource TableViewRowSelectionIndicatorBrush}"
                                       CornerRadius="{ThemeResource TableViewRowSelectionIndicatorCornerRadius}">
                                <Border.RenderTransform>
                                    <ScaleTransform x:Name="SelectionIndicatorScale"
                                                    ScaleX="1"
                                                    ScaleY="0" />
                                </Border.RenderTransform>
                            </Border>

                            <Border x:Name="MultiSelectSquare"
                                    Grid.Column="1"
                                    BorderBrush="{ThemeResource TableViewRowCheckBoxBorderBrush}"
                                    BorderThickness="1"
                                    Width="20"
                                    Height="20"
                                    Margin="10,0,0,0"
                                    CornerRadius="{ThemeResource TableViewRowCheckBoxCornerRadius}"
                                    VerticalAlignment="Center"
                                    HorizontalAlignment="Center"
                                    Visibility="Collapsed">
                                <Border.Clip>
                                    <RectangleGeometry Rect="0,0,20,20">
                                        <RectangleGeometry.Transform>
                                            <TranslateTransform x:Name="MultiSelectClipTransform" />
                                        </RectangleGeometry.Transform>
                                    </RectangleGeometry>
                                </Border.Clip>
                                
                                <Border.RenderTransform>
                                    <TranslateTransform x:Name="MultiSelectCheckBoxTransform" />
                                </Border.RenderTransform>

                                <AnimatedIcon x:Name="MultiSelectCheck"
                                              Foreground="{ThemeResource TableViewRowCheckBoxBrush}"
                                              AnimatedIcon.State="NormalOff"
                                              Margin="0,1,0,-1">
                                    <animatedvisuals:AnimatedAcceptVisualSource />
                                    <AnimatedIcon.FallbackIconSource>
                                        <FontIconSource x:Name="DownLevelCheckGlyph"
                                                        FontFamily="{ThemeResource SymbolThemeFontFamily}"
                                                        Glyph="{StaticResource CheckBoxCheckedGlyph}"
                                                        FontSize="{StaticResource CheckBoxGlyphSize}" />
                                    </AnimatedIcon.FallbackIconSource>
                                </AnimatedIcon>
                            </Border>
                        </Grid>

                        <!-- The 'Xg' text simulates the amount of space one line of text will occupy.
                             In the DataPlaceholder state, the Content is not loaded yet so we
                             approximate the size of the item using placeholder text. -->
                        <TextBlock x:Name="PlaceholderTextBlock"
                                   Grid.ColumnSpan="3"
                                   Opacity="0"
                                   Text="Xg"
                                   Foreground="{x:Null}"
                                   Margin="{TemplateBinding Padding}"
                                   IsHitTestVisible="False"
                                   AutomationProperties.AccessibilityView="Raw" />

                        <local:TableViewRowPresenter x:Name="RowPresenter"
                                                       HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                                       VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                                       Margin="{TemplateBinding Padding}" />

                        <Border x:Name="MultiArrangeOverlayTextBorder"
                                Grid.ColumnSpan="3"
                                Opacity="0"
                                IsHitTestVisible="False"
                                Margin="12,0,0,0"
                                MinWidth="20"
                                Height="20"
                                VerticalAlignment="Center"
                                HorizontalAlignment="Left"
                                Background="{ThemeResource ListViewItemMultiArrangeOverlayTextBackground}"
                                BorderThickness="2"
                                BorderBrush="{ThemeResource ListViewItemMultiArrangeOverlayTextBorder}">
                            <TextBlock x:Name="MultiArrangeOverlayText"
                                       Text="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=TemplateSettings.DragItemsCount}"
                                       Style="{ThemeResource CaptionTextBlockStyle}"
                                       IsHitTestVisible="False"
                                       Opacity="0"
                                       VerticalAlignment="Center"
                                       HorizontalAlignment="Center"
                                       AutomationProperties.AccessibilityView="Raw" />
                        </Border>

                        <Grid x:Name="DetailsBorder"
                              Grid.Row="1"
                              Grid.Column="2"
                              Visibility="Collapsed">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>

                            <Rectangle HorizontalAlignment="Stretch"
                                       IsHitTestVisible="False"
                                       Visibility="Visible"
                                       Fill="{Binding Fill, ElementName=HorizontalGridLine}"
                                       Height="{Binding Height, ElementName=HorizontalGridLine}" />

                            <ContentPresenter x:Name="RowDetailsPresenter"
                                              Grid.Row="1"
                                              Visibility="Visible"
                                              Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" />

                        </Grid>

                        <Rectangle x:Name="HorizontalGridLine"
                                   Grid.Row="2"
                                   Grid.ColumnSpan="3"
                                   HorizontalAlignment="Stretch"
                                   IsHitTestVisible="False" />
                    </Grid>
                </ControlTemplate>
            </not_win:Setter.Value>
        </not_win:Setter>
    </Style>

</ResourceDictionary>
